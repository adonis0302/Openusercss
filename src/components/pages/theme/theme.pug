div
  modal(name="delete-theme", :draggable="true", height="auto")
    form(@submit.prevent="deleteTheme")
      b-card(is-unselectable)
        b-card-header
          b-card-header-title
            b-content
              h3.is-marginless Confirm theme deletion
        b-card-content
          b-content
            p
              | Title: {{viewedTheme.title}}
              br
              | Created: {{viewedTheme.createdAt | moment('MMMM DD, YYYY (ZZ)')}}
              br
              | Last updated: {{viewedTheme.lastUpdate | moment('MMMM DD, YYYY (ZZ)')}}
            hr
            p Please type your theme's title here to confirm:
            b-control(has-icons-left)
              icon(icon="delete")
              b-input(
                name="confirmTitle",
                v-model="confirmTitle",
                aria-label="confirm theme title",
                :placeholder="viewedTheme.title"
              )
        b-card-footer
          b-card-footer-item(is-paddingless)
            b-button(type="submit", is-danger, is-fullbleed, :disabled="viewedTheme.title !== confirmTitle") Delete theme
          b-card-footer-item(is-paddingless)
            b-button(type="reset", @click="cancelDelete", is-fullbleed, is-borderless) Cancel

  modal(name="source-viewer", height="auto", :scrollable="true")
    b-tile(is-parent, is-paddingless)
      b-tile(is-child)
        code {{viewedTheme.content}}

  b-container(:inert="showingModal")
    div
      b-section
        notification(v-show="actionErrors.length > 0", icon="alert", color="is-danger").is-danger
          div(slot="content")
            p(v-for="error in actionErrors") {{error}}
        b-level
          b-level-left(is-marginless)
            h1 {{viewedTheme.title}}
          b-level-right
            b-tile(is-parent, is-paddingless)
              b-tile(is-child, v-if="currentUser && viewedTheme.user._id === currentUser._id")
                b-content(is-marginless, is-pulled-right)
                  b-button(is-danger, @click="confirmDeleteTheme") Delete theme
              b-tile(is-child, v-if="currentUser && viewedTheme.user._id === currentUser._id")
                b-content(is-marginless, is-pulled-right)
                  router-link.button.is-primary(:to="'/theme/edit/' + viewedTheme._id") Edit theme
              b-tile(is-child)
                b-content(is-marginless, is-pulled-right)
                  b-button(@click="installTheme", is-primary) Install theme

        b-columns
          b-column(is-6)
            div
              b-box(is-paddingless, is-marginless).ouc-theme-card
                flush-img(:source="viewedTheme.screenshotUrl", :placeholder="viewedTheme.smallScreenshotUrl", height="250px", align="left")
                b-column
                  b-tile(is-parent, is-paddingless)
                    b-tile(is-child, is-parent, is-vertical)
                      b-level(is-marginless)
                        b-level-left
                          router-link(:to="'/profile/' + viewedTheme.user._id")
                            b-button(is-primary) Visit {{viewedTheme.user.displayname}}'s profile
                          b-button(
                            is-primary,
                            @click="viewSource"
                          ) View source
                      br
                      //- b-content
                        pre {{viewedTheme.content}}
                      //- p Average rating: {{viewedTheme.rating}}
                      p Created at: {{formatMoment(viewedTheme.createdAt)}}
                      p Last update: {{formatMoment(viewedTheme.lastUpdate)}}
                      p Version: {{viewedTheme.version}}

            b-box
              h2 About
              br
              p {{viewedTheme.description}}
          b-column(is-6)
            b-box
              p Theme options are not implemented yet.

  attributor
