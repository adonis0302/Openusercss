div.route-root
  b-container
    .section
      form(@submit.prevent="submitSearch").has-bottom-margin
        b-columns
          b-column(is-11)
            search-field(
              v-model="query",
              :value="query",
              @input="queryChange"
            )
          b-column(is-1)
            button.button(type="submit", :class="['button', 'is-primary', 'is-pulled-right', {'is-loading': loading}]") Search
      div(v-if="results")
        b-columns
          b-column(is-4)
            div(v-if="!results.users.length")
              p No users found
            div(v-for="user in results.users")
              router-link(:to="'/profile/' + user._id")
                b-box(is-paddingless, is-marginless).ouc-user-card
                  b-tile(is-parent, is-paddingless)
                    b-tile(is-4)
                      b-tile(is-child).ouc-user-avatar
                        flush-img(:source="user.avatarUrl", :placeholder="user.smallAvatarUrl", height="90px", align="left")
                    b-tile(is-8, is-parent)
                      b-columns(is-vcentered)
                        b-column
                          b-content
                            h4 {{user.displayname}}
                            p Themes: {{user.themes.length}}

          b-column(is-8)
            div(v-if="!results.themes.length")
              p No themes found
            div(v-for="theme in results.themes").has-bottom-margin
              theme-card(:data-index="index", :small="true", direction="horizontal", card-class="is-primary", :theme-id="theme._id")
                b-tile(slot="content", is-parent)
                  b-columns
                    b-column
                      h4 {{theme.title}}
                      br
                      p(v-if="averageRating(theme.ratings) === 0") Not rated yet
                      p(v-if="averageRating(theme.ratings) !== 0")
                        star-rating(
                          :rating="averageRating(theme.ratings)",
                          :item-size="10",
                          :show-rating="false",
                          :read-only="true"
                        )
                      h6 Created {{theme.createdAt | moment('from', 'now')}}
                      h6(v-if="theme.createdAt !== theme.lastUpdate") Last updated {{theme.lastUpdate | moment('from', 'now')}}
  ouc-footer
